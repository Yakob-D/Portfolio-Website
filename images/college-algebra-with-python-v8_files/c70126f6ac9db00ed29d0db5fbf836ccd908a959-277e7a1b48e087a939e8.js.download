"use strict";(self.webpackChunk_freecodecamp_client=self.webpackChunk_freecodecamp_client||[]).push([[5032],{25680:function(e,t,n){n.d(t,{A:function(){return X}});n(94814);var a=n(72047),o=n(98567),r=n(7102),i=n(538),s=n(43319),l=n(65479);const m=e=>Intl.NumberFormat("en-US").format(e),c=e=>m(e/100);var d=n(6731),p=n(7324),u=n.n(p),h=n(68088),y=n(26496),g=n(15333),E=n(23116),b=n(65176);function S(e){let{processing:t,reset:n,success:r,redirecting:l,isSignedIn:m,error:c=null}=e;const{t:d}=(0,i.Bd)(),p=t||l?"info":r?"success":"danger",h=l?""+d("donate.redirecting"):t?""+d("donate.processing"):r?""+d("donate.thank-you"):""+d("donate.error");return a.createElement(o.Fc,{variant:p,className:"donation-completion"},a.createElement("b",null,h),a.createElement(s.hK,{size:"medium"}),a.createElement("div",{className:"donation-completion-body"},(t||l)&&a.createElement(u(),{className:"user-state-spinner",color:"#0a0a23",fadeIn:"none",name:"line-scale"}),r&&a.createElement(a.Fragment,null,a.createElement("p",null,d("donate.free-tech")),m&&a.createElement(a.Fragment,null,a.createElement("p",null,d("donate.visit-supporters")),a.createElement(s.N_,{className:"btn complete-button",key:"supporters",sameTab:!1,to:"/supporters"},d("buttons.go-to-supporters")))),c&&a.createElement("p",null,c)),a.createElement("div",{className:"donation-completion-buttons"},c&&a.createElement("button",{type:"button",className:"try-again-button",onClick:n},d("buttons.try-again"))))}S.displayName="DonateCompletion";var f=S,v=n(7572);const P=e=>a.createElement("svg",Object.assign({id:"patreon-logo",viewBox:"10 0 2560 356",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",role:"img","aria-labelledby":"patreon-logo-label"},e),a.createElement("title",{id:"patreon-logo-label"},"Patreon"),a.createElement("g",null,a.createElement("path",{d:"M1536.54 72.449v76.933h128.24v61.473h-128.24v74.51h128.24v62.921h-206.64V9.529h206.64v62.92h-128.24M2070.82 178.907c0-55.652-37.76-107.434-99.21-107.434-61.95 0-99.21 51.782-99.21 107.434s37.26 107.435 99.21 107.435c61.45 0 99.21-51.783 99.21-107.435zm-278.77 0c0-92.916 66.79-178.093 179.56-178.093 112.26 0 179.05 85.177 179.05 178.093 0 92.916-66.79 178.093-179.05 178.093-112.77 0-179.56-85.177-179.56-178.093zM186.32 131.97c0-31.46-21.299-58.563-54.206-58.563H78.398v117.109h53.716c32.907 0 54.206-27.086 54.206-58.546zM0 9.529h141.788c75.016 0 123.417 56.628 123.417 122.441s-48.401 122.423-123.417 122.423h-63.39v93.893H0V9.529zM492.17 106.314l-41.621 139.382h82.266L492.17 106.314zm73.081 241.972-13.054-41.134H431.69l-13.072 41.134h-83.73L455.882 9.529h72.105l122.442 338.757h-85.178zM782.055 77.277H705.61V9.529h231.793v67.748h-76.951v271.009h-78.397V77.277M2485.08 230.202V9.529h77.91v338.757h-81.78l-121.97-217.78v217.78h-78.4V9.529h81.78l122.46 220.673M1245.68 131.97c0-31.46-21.3-58.563-54.21-58.563h-53.72v117.109h53.72c32.91 0 54.21-27.086 54.21-58.546zM1059.36 9.529h142.29c75 0 123.4 56.628 123.4 122.441 0 47.425-25.17 89.517-67.28 109.369l67.77 106.947h-90.98l-60.03-93.893h-36.78v93.893h-78.39V9.529z"})));P.displayName="PatreonLogo";var C=P;const{patreonClientId:D}=v;var N=e=>{let{postPayment:t,donationAmount:n}=e;if(!D||!n||!l.hY.successUrl)return null;const o="https://www.patreon.com/oauth2/become-patron?response_type=code"+("$&min_cents="+n)+("&client_id="+D)+("&redirect_uri="+l.hY.successUrl)+"&scope=identity%20identity[email]";return a.createElement("a",{className:"patreon-button link-button","data-patreon-widget-type":"become-patron-button",href:o,onClick:()=>t({paymentProvider:l.CA.Patreon}),rel:"noreferrer",target:"_blank"},a.createElement(C,null))},F=n(96519),w=n(94685),A=n(31643);class M extends a.Component{constructor(){super(...arguments),this.state={isSdkLoaded:!!window.paypal,isSubscription:!0},this.onScriptLoad=()=>{this.setState({isSdkLoaded:!0}),this.props.onLoad()}}static getDerivedStateFromProps(e,t){const{isSubscription:n}=e;return n!==t.isSubscription?{isSubscription:n}:null}componentDidMount(){this.loadScript(this.props.isSubscription,!0)}componentWillUnmount(){(0,A.i)("paypal-sdk")}componentDidUpdate(e){e.isSubscription===this.state.isSubscription&&e.style.color===this.props.style.color&&e.style.tagline===this.props.style.tagline&&e.style.height===this.props.style.height&&e.isMinimalForm===this.props.isMinimalForm||(this.setState({isSdkLoaded:!1}),this.loadScript(this.state.isSubscription,!0))}loadScript(e,t){t&&(0,A.i)("paypal-sdk");const n=this.props.isMinimalForm?"card,":"";let a="?client-id="+this.props.clientId+"&disable-funding="+n+"credit,bancontact,blik,eps,giropay,ideal,mybank,p24,sepa,sofort,venmo";e&&(a+="&vault=true&intent=subscription"),(0,A.Z)("paypal-sdk",!0,"https://www.paypal.com/sdk/js"+a,this.onScriptLoad,"paypal")}captureOneTimePayment(e,t){return t.order.capture().then((t=>this.props.onApprove(t,e)))}render(){const{isSdkLoaded:e,isSubscription:t}=this.state,{onApprove:n,onError:o,onCancel:r,createSubscription:i,createOrder:s,style:l}=this.props;if(!e)return a.createElement(a.Fragment,null);const m=window.paypal.Buttons.driver("react",{React:a,ReactDOM:w});return a.createElement(m,{createOrder:t?null:s,createSubscription:t?i:null,onApprove:t?(e,t)=>n(e,t):(e,t)=>this.captureOneTimePayment(e,t),onCancel:r,onError:o,style:l})}}M.displayName="PayPalButtonScriptLoader";const{paypalClientId:k,deploymentEnv:I}=v;class L extends a.Component{constructor(e){super(e),this.state={amount:l.cl.donationAmount,duration:l.cl.donationDuration,planId:null}}static getDerivedStateFromProps(e){const{donationAmount:t,donationDuration:n}=e;return{...(0,l.VD)(t,n,l.hQ[I||"staging"])}}render(){const{duration:e,planId:t,amount:n}=this.state,{t:o,theme:r,isPaypalLoading:i,isMinimalForm:s}=this.props,m="one-time"!==e,c=r===F.B.Night?"white":"gold";return k?a.createElement("div",{className:"paypal-buttons-container"},a.createElement(M,{clientId:k,createOrder:(e,t)=>t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(n/100).toString()}}]}),createSubscription:(e,n)=>n.subscription.create({plan_id:t}),isMinimalForm:s,isPaypalLoading:i,isSubscription:m,onApprove:e=>{this.props.postPayment({paymentProvider:l.CA.Paypal,data:e})},onCancel:()=>{this.props.onDonationStateChange({redirecting:!1,processing:!1,success:!1,error:o("donate.failed-pay")})},onError:()=>{this.props.handlePaymentButtonLoad("paypal"),this.props.onDonationStateChange({redirecting:!1,processing:!1,success:!1,error:o("donate.try-again")})},onLoad:()=>this.props.handlePaymentButtonLoad("paypal"),planId:t,style:{tagline:!1,height:43,color:c}})):null}}L.displayName="PaypalButton";const B=(0,h.Mz)(E.dt,E.Ci,((e,t)=>{let{isDonating:n}=e;return{isDonating:n,showLoading:t}}));L.displayName="PaypalButton";var x=(0,d.Ng)(B)((0,i.CI)()(L)),z=n(9671);function _(e){let{theme:t,t:n,onDonationStateChange:o,postPayment:r,processing:i}=e;const[s,m]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[p,u]=(0,a.useState)([{elementType:"cardNumber",complete:!1,error:null},{elementType:"cardExpiry",complete:!1,error:null}]),h=p.every((e=>{let{complete:t,error:n}=e;return t&&!n})),y=c||i,g=(0,z.useStripe)(),E=(0,z.useElements)();function b(e){const{elementType:t,error:n,complete:a}=e;u(p.map((e=>e.elementType===t?{elementType:t,error:n,complete:a}:e)))}const S={style:{base:{fontSize:"18px",fontFamily:"Lato, sans-serif",color:t===F.B.Night?"#fff":"#0a0a23","::placeholder":{color:"#858591"}}}},f=async(e,t)=>g?g.confirmCardPayment(e,{payment_method:t}):{error:{type:"StripeNotLoaded"}};return a.createElement("form",{className:"donation-form",onSubmit:e=>{(async e=>{if(e.preventDefault(),!h)return m(!1);if(m(!0),!y&&g&&E){const e=E.getElement(z.CardNumberElement);if(e){d(!0);const{paymentMethod:t,error:a}=await g.createPaymentMethod({type:"card",card:e});a?o({redirecting:!1,processing:!1,success:!1,error:n("donate.went-wrong")}):t&&r({paymentProvider:l.CA.StripeCard,paymentMethodId:t.id,handleAuthentication:f})}}d(!1)})(e)}},a.createElement("div",{className:"donation-elements"+(s?"":" failed-submission")},a.createElement(z.CardNumberElement,{className:"form-control donate-input-element",onChange:b,options:S}),a.createElement(z.CardExpiryElement,{className:"form-control donate-input-element",onChange:b,options:S})),a.createElement("div",{className:"form-status"},!s&&a.createElement("p",null,n("donate.valid-card"))),a.createElement("button",{className:"confirm-donation-btn",disabled:!g||!E||y,type:"submit"},n("buttons.donate")))}var T=n(75819);const V=e=>{let{stripe:t,label:n,amount:o,theme:r,duration:s,postPayment:m,onDonationStateChange:c,handlePaymentButtonLoad:d}=e;const[p,u]=(0,a.useState)(null),{t:h}=(0,i.Bd)(),y=(0,a.useCallback)((e=>{c({redirecting:!1,processing:!1,success:!1,error:e})}),[c]);return(0,a.useEffect)((()=>{if(!t)return;const e=t.paymentRequest({country:"US",currency:"usd",total:{label:n,amount:o},requestPayerName:!0,requestPayerEmail:!0,disableWallets:["browserCard"]});return e.on("paymentmethod",(async e=>{const{payerEmail:n,payerName:a,paymentMethod:{id:r}}=e,{data:{clientSecret:i,subscriptionId:c,error:d}}=await(0,T.eQ)({email:n,name:a,amount:o,duration:s});if(d)e.complete("fail"),y(h("donate.try-another-method"));else if(i){const{paymentIntent:o,error:s}=await t.confirmCardPayment(i,{payment_method:e.paymentMethod.id},{handleActions:!1});if(s)e.complete("fail"),y(h("donate.try-another-method"));else{if(e.complete("success"),"requires_action"===o.status){const{error:e}=await t.confirmCardPayment(i);if(e)return y(h("donate.try-another-method"))}m({paymentProvider:l.CA.Stripe,paymentMethodId:r,payerEmail:n,payerName:a,subscriptionId:c})}}})),e.canMakePayment().then((t=>{t&&u(e)})),()=>{u(null)}}),[n,o,t,m,d,s,y,h]),a.createElement("form",{className:"wallets-form"},p&&a.createElement(z.PaymentRequestButtonElement,{onReady:()=>d("stripe"),options:{style:{paymentRequestButton:{type:"default",theme:r===F.B.Night?"light":"dark",height:"43px"}},paymentRequest:p}}))};function O(e){return a.createElement(z.ElementsConsumer,null,(t=>{let{stripe:n}=t;return a.createElement(V,Object.assign({stripe:n},e))}))}var U=n(8293),R=n(84904);var q=()=>a.createElement(a.Fragment,null,a.createElement(R.g,{icon:U.DW4}),"  ");const j=(0,h.Mz)(E.Ci,E.$k,E.ig,E.Rv,E.dt,E.hm,((e,t,n,a,o,r)=>{let{email:i,theme:s}=o;return{isSignedIn:t,isDonating:n,showLoading:e,donationFormState:a,email:i,theme:s,completedChallenges:r}})),H={postCharge:g._T,updateDonationFormState:g.$z},K=()=>a.createElement("div",{className:" donation-completion donation-completion-loading"},a.createElement(u(),{className:"script-loading-spinner",fadeIn:"none",name:"line-scale"}));class W extends a.Component{constructor(e){super(e),this.postPayment=e=>{let{paymentProvider:t,data:n,payerEmail:a,payerName:o,paymentMethodId:r,handleAuthentication:i,subscriptionId:s}=e;const{donationAmount:l,donationDuration:m}=this.state,{paymentContext:c,email:d,selectedDonationAmount:p}=this.props,u=p||l;this.props.postCharge({paymentProvider:t,paymentContext:c,amount:u,duration:m,data:n,email:d||a,name:o,paymentMethodId:r,handleAuthentication:i,subscriptionId:s}),this.props.handleProcessing&&this.props.handleProcessing()};const t=l.cl;this.state={...t},this.onDonationStateChange=this.onDonationStateChange.bind(this),this.resetDonation=this.resetDonation.bind(this),this.postPayment=this.postPayment.bind(this),this.handlePaymentButtonLoad=this.handlePaymentButtonLoad.bind(this)}componentWillUnmount(){this.resetDonation()}onDonationStateChange(e){window.scrollTo(0,0),this.props.updateDonationFormState({...this.props.donationFormState,...e})}handlePaymentButtonLoad(e){this.props.updateDonationFormState({...this.props.donationFormState,loading:{...this.props.donationFormState.loading,[e]:!1}})}resetDonation(){return this.props.updateDonationFormState({...y.fe})}renderButtonGroup(){const{donationAmount:e,donationDuration:t}=this.state,{donationFormState:{loading:n,processing:o},defaultTheme:r,theme:i,t:s,isMinimalForm:l,isSignedIn:m,isDonating:d,editAmount:p,selectedDonationAmount:u,completedChallenges:h}=this.props,y=u||e,g=r||i,E=s("donate.wallet-label-1",{usd:y/100})+":",S=h.length>=3,f=m&&(l||!d)&&S,v=a.createElement(a.Fragment,null,a.createElement("b",null,s("donate.confirm-multitier",{usd:c(y)})),a.createElement("button",{type:"button",className:"edit-amount-button",onClick:p},s("donate.edit-amount")));return a.createElement(a.Fragment,null,a.createElement("div",{className:p?"edit-amount-confirmation":l?"donation-label-modal":""},v),a.createElement(b.A,{size:p?"small":"medium"}),a.createElement("fieldset",{"data-playwright-test-label":"donation-form",className:"donate-btn-group security-legend"},a.createElement("legend",null,a.createElement(q,null),s("donate.secure-donation")),n.stripe&&n.paypal&&a.createElement(K,null),a.createElement(O,{amount:y,duration:t,handlePaymentButtonLoad:this.handlePaymentButtonLoad,label:E,onDonationStateChange:this.onDonationStateChange,postPayment:this.postPayment,theme:g}),a.createElement(x,{donationAmount:y,donationDuration:t,handlePaymentButtonLoad:this.handlePaymentButtonLoad,postPayment:this.postPayment,isMinimalForm:f,isPaypalLoading:n.paypal,onDonationStateChange:this.onDonationStateChange,theme:g}),(!n.stripe||!n.paypal)&&a.createElement(N,{postPayment:this.postPayment,donationAmount:y}),f&&a.createElement(a.Fragment,null,a.createElement("div",{className:"separator"},s("donate.or-card")),a.createElement(_,{onDonationStateChange:this.onDonationStateChange,postPayment:this.postPayment,processing:o,t:s,theme:g}))))}renderPageForm(){return a.createElement(a.Fragment,null,a.createElement("div",null,this.renderButtonGroup()))}render(){const{donationFormState:{processing:e,success:t,error:n,redirecting:o},isMinimalForm:r,isSignedIn:i}=this.props;return t||n?a.createElement(f,{processing:e,redirecting:o,success:t,error:n,isSignedIn:i,reset:this.resetDonation}):a.createElement(a.Fragment,null,(e||o)&&a.createElement(f,{processing:e,redirecting:o,success:t,error:n,isSignedIn:i,reset:this.resetDonation}),a.createElement("div",{className:e||o?"hide":""},r?this.renderButtonGroup():this.renderPageForm()))}}W.displayName="DonateForm",W.displayName="DonateForm";var $=(0,d.Ng)(j,H)((0,i.CI)()(W));function G(e){let{donationAmount:t,setDonationAmount:n,setShowDonateForm:d,isAnimationEnabled:p}=e;const{t:u}=(0,i.Bd)();return(0,r.iT)("aa-test-in-component"),a.createElement(o.fI,{className:"donate-btn-group donation-tier-selection","data-playwright-test-label":"donation-tier-selector"},a.createElement(o.fv,{xs:12},a.createElement("b",null,u("donate.confirm-monthly",{usd:c(t)})),a.createElement(s.hK,{size:"small"}),a.createElement(o.tU,{className:"donate-btn-group",defaultValue:t.toString(),onValueChange:e=>{n(Number(e))}},a.createElement(o.j7,{className:"nav-lists"},l.zx.map((e=>a.createElement(o.Xi,{key:e,value:e.toString(),onClick:()=>n(e)},"$",c(e))))),a.createElement(s.hK,{size:"small"}),l.zx.map((e=>{const n=c(t),r=m(t/100*50);const i=u("donate.your-donation-2",{usd:n,hours:r});return a.createElement(o.av,{key:e,className:"tab-content",value:e.toString()},a.createElement("p",null,i))}))),a.createElement("button",{className:"text-center confirm-donation-btn donate-btn-group",type:"submit",onClick:()=>d(!0)},u(p?"buttons.confirm-amount":"buttons.donate")),a.createElement(s.hK,{size:"medium"})))}function Q(e){let{handleProcessing:t,isMinimalForm:n,setShowDonateForm:r,donationAmount:i,paymentContext:l}=e;return a.createElement(o.fI,null,a.createElement(o.fv,{xs:12},a.createElement($,{handleProcessing:t,isMinimalForm:n,paymentContext:l,editAmount:()=>r(!1),selectedDonationAmount:i}),a.createElement(s.hK,{size:"medium"})))}var X=e=>{let{handleProcessing:t,setShowHeaderAndFooter:n,isMinimalForm:o,paymentContext:r,isAnimationEnabled:i}=e;const[s,m]=(0,a.useState)(l.Ob),[c,d]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n&&n(!c)}),[c,n]),a.createElement(a.Fragment,null,a.createElement("div",c&&{className:"hide"},a.createElement(G,{donationAmount:s,setDonationAmount:m,setShowDonateForm:d,isAnimationEnabled:i})),a.createElement("div",!c&&{className:"hide"},a.createElement(Q,{donationAmount:s,handleProcessing:t,setShowDonateForm:d,isMinimalForm:o,paymentContext:r})))}},31643:function(e,t,n){function a(e,t,n,a,o){const r=document.createElement("script");r.type="text/javascript",r.id=e,r.async=t,r.onload=a,r.src=n,r.text=o,document.getElementsByTagName("head")[0].appendChild(r)}function o(e){const t=document.getElementById(e);t&&t.remove()}n.d(t,{Z:function(){return a},i:function(){return o}})}}]);
//# sourceMappingURL=c70126f6ac9db00ed29d0db5fbf836ccd908a959-277e7a1b48e087a939e8.js.map